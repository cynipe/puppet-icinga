#
# Managed by Puppet
#

# icinga-web apache configuration
# - Enable all options .htaccess
# - Add extjs library to alias
#
AliasMatch /icinga-web/modules/([A-Za-z0-9]*)/resources/styles/([A-Za-z0-9]*\.css)$ <%= scope.lookupvar('icinga::server::icingaweb_sharedir') %>/app/modules/$1/pub/styles/$2
AliasMatch /icinga-web/modules/([A-Za-z0-9]*)/resources/images/([A-Za-z_\-0-9]*\.(png|gif|jpg))$ <%= scope.lookupvar('icinga::server::icingaweb_sharedir') %>/app/modules/$1/pub/images/$2


Alias /icinga-web/js/ext3 <%= scope.lookupvar('icinga::server::icingaweb_sharedir') %>/lib/ext3
Alias /icinga-web <%= scope.lookupvar('icinga::server::icingaweb_sharedir') %>/pub

<DirectoryMatch <%= scope.lookupvar('icinga::server::icingaweb_sharedir') %>/app/modules/\w+/pub/styles/>
  Order allow,deny
  Allow from all
</DirectoryMatch>

<DirectoryMatch <%= scope.lookupvar('icinga::server::icingaweb_sharedir') %>/app/modules/\w+/pub/images/>
  Order allow,deny
  Allow from all
</DirectoryMatch>


<Directory <%= scope.lookupvar('icinga::server::icingaweb_sharedir') %>/lib/ext3>
  Order allow,deny
  Allow from all
</Directory>

<Directory <%= scope.lookupvar('icinga::server::icingaweb_sharedir') %>/pub>
  DirectoryIndex index.php
  Options FollowSymLinks
  AllowOverride all
  Order allow,deny
  Allow from all
</Directory>
